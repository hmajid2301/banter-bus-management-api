[tox]
envlist = py39,integration,coverage,pre-commit
isolated_build = true

[testenv]
deps =
	pytest
	pytest-mock
	pytest-asyncio
	factory-boy
commands = pytest -v {posargs} tests/unit

[testenv:integration]
deps =
    asgi-lifespan
    httpx
	pytest
	pytest-asyncio
commands = pytest -v {posargs} tests/integration

[testenv:coverage]
deps =
    asgi-lifespan
    httpx
	pytest
	pytest-asyncio
	pytest-cov
commands =
	pytest -v {posargs} --junitxml=report.xml tests/integration --cov=app/
	coverage xml

[testenv:pre-commit]
deps =
	pre-commit
commands = pre-commit {posargs}